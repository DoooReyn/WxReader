# 待办事项

- [x] 导出笔记

- [x] `QSettings` 读取和保存数据有问题！
    - 使用自定义用户配置类来实现配置读写

- [x] 使用热键退出时有问题关闭时

- [x] 全文完测试

- [x] 修复选中暂停失效

- [x] 首次打开可能会失效

- [x] 高度不够滚动时会失效

- [x] 准备解耦，拆分 `WindowModel`

- [x] I18n key 提取出来单独成类，方便同步修改

- [x] 选项页面
    - [x] 速度自定义
    - [x] 速度步幅自定义
    - [x] 全文结束后请求 GET
    - [x] 选项视图翻译

- [x] 网络错误页面

- [x] 帮助，关于，捐赠页面

- [x] 打包
    - `Pyinstaller` 打出来的包很大，可以手动裁剪一些不需要的库，但因为 `Qt` 的 `WebEngine` 动态库文件太大了，所以基础包还是很大
    - 虽然可以使用 `UPX` 做进一步压缩，但是发现 `UPX` 打出来的包运行不了
    - 于是，想到可以在未压缩的目录下使用 `UPX` 压缩过的动态库文件，试了下还是可行的，唯一的缺点就是 `UPX` 处理过的运行起来有点慢

- [x] 内存泄漏问题
    - 问题描述：每切换一次页面，内存占用只增不减
    - 问题所在： `Qt5` 的 `QWebEngineView` 内存管理存在问题
    - 解决方案：升级到 `Qt6` 或者 `PySide6`
    - 目前情况：
        - 项目已升级到升级到 `PySide6`
        - 加载新页面时会出现内存暴涨；如果页面内容比较多，内存占用会更大；如果快速切换页面，内存会涨得更快；
        - 但在页面加载完成之后，等待一段时间，内存会下降并稳定下来 *(~=200M)*，可见 `QWebEngineView` 的内存释放存在一定的滞后性

- [x] 静默模式失效
    - 删除静默模式

- [x] `QWebEngineView` 性能问题
  > 就目前的体验来看， `Qt` 内置的 `QWebEngineView` 体验不太好，主要包括：
    - 首次加载网页速度出奇得慢 *(看讨论需要禁用代理，我试过了但没啥卵用)*
    - 网页内响应出奇得卡 *(硬伤，没得洗)*

  刚好之前了解过 [cef](https://bitbucket.org/chromiumembedded/cef/src/master/) 项目，看看能不能使用 `cef` 替换掉 `QWebEngineView`.
    - 试了下结合 `PySide6` 和 `cefpython3` 打开微信读书首页，打出来的包比原来的还小，运行速度十分流畅!
    - 改日可以研究一下如何实现交互！敬请期待！

  新版本已发布，将全面拥抱 `cefpython3`！
